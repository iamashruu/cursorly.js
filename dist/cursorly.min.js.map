{"version":3,"file":"cursorly.min.js","sources":["../src/lib/effects.js","../src/lib/particles.js","../src/lib/animation.js","../src/lib/cursor.js","../src/index.js","../src/lib/canvas.js","../src/lib/api.js"],"sourcesContent":["import effectsData from '../data/effects.json';\r\n\r\nexport const effectsList = (effectsData.effects || []).map(e => e.name);\r\n\r\nexport function getEffectDefaults(name) {\r\n  const effect = (effectsData.effects || []).find(e => e.name === name);\r\n  return effect ? { ...effect } : { name: 'trail', color: 'rainbow', density: 6, size: [2,8], decay:0.95, hueStep:3 };\r\n}\r\n","export class Particle {\r\n    constructor(lib) {\r\n        const [minSize, maxSize] = lib.options.effect.size;\r\n        this.x = lib.mouse.x;\r\n        this.y = lib.mouse.y;\r\n        this.size = Math.random() * (maxSize - minSize) + minSize;\r\n\r\n        if (lib.options.effect.name === \"sparkle\") {\r\n            this.speedX = (Math.random() - 0.5) * 4;\r\n            this.speedY = (Math.random() - 0.5) * 4;\r\n        } else {\r\n            this.speedX = Math.random() * 2 - 1;\r\n            this.speedY = Math.random() * 2 - 1;\r\n        }\r\n\r\n        this.color = lib.options.effect.color === \"rainbow\"\r\n            ? `hsl(${lib.hue},100%,60%)`\r\n            : lib.options.effect.color;\r\n\r\n        this.lib = lib;\r\n    }\r\n\r\n    update() {\r\n        this.x += this.speedX;\r\n        this.y += this.speedY;\r\n        this.size *= this.lib.options.effect.decay;\r\n    }\r\n\r\n    draw() {\r\n        const ctx = this.lib.ctx;\r\n        ctx.beginPath();\r\n        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);\r\n        ctx.fillStyle = this.color;\r\n        ctx.fill();\r\n    }\r\n}\r\n","import { drawCursor } from './cursor.js';\r\n\r\nexport function animate(lib) {\r\n    lib.ctx.clearRect(0, 0, lib.canvas.width, lib.canvas.height);\r\n\r\n    if (lib.particlesEnabled) lib.hue += lib.options.effect.hueStep;\r\n\r\n    if (lib.particlesEnabled) {\r\n        for (let i = 0; i < lib.particles.length; i++) {\r\n            lib.particles[i].update();\r\n            lib.particles[i].draw();\r\n            if (lib.particles[i].size < 0.5) {\r\n                lib.particles.splice(i, 1);\r\n                i--;\r\n            }\r\n        }\r\n    }\r\n\r\n    if (lib.enabled) drawCursor(lib);\r\n    requestAnimationFrame(() => animate(lib));\r\n}\r\n","export function initCursor(lib) {\r\n    lib.cursorImage = new Image();\r\n    lib.cursorLoaded = false;\r\n    lib.cursorImage.onload = () => { lib.cursorLoaded = true; };\r\n}\r\n\r\nexport function drawCursor(lib) {\r\n    if (!lib.enabled || !lib.cursorLoaded) return;\r\n    const size = lib.options.cursorSize || 24;\r\n    lib.ctx.drawImage(\r\n        lib.cursorImage,\r\n        lib.mouse.x - size / 2,\r\n        lib.mouse.y - size / 2,\r\n        size,\r\n        size\r\n    );\r\n}\r\n","import { effectsList, getEffectDefaults } from './lib/effects.js';\r\nimport { initCanvas } from './lib/canvas.js';\r\nimport { initCursor } from './lib/cursor.js';\r\nimport { Particle } from './lib/particles.js';\r\nimport { animate } from './lib/animation.js';\r\nimport * as API from './lib/api.js';\r\n\r\nclass Cursorly {\r\n    constructor(options = {}) {\r\n        this.options = Object.assign({ cursor: 0, effect: {} }, options);\r\n    \r\n        this.effects = effectsList;\r\n        this.options = Object.assign({ cursor: 0, effect: {} }, options);\r\n\r\n        // Merge user effect with defaults from effects.json\r\n        const userEffectName = this.options.effect.name || 'trail';\r\n        const defaultEffect = getEffectDefaults(userEffectName);\r\n        this.options.effect = Object.assign({}, defaultEffect, this.options.effect || {});\r\n\r\n        if (!this.effects.includes(this.options.effect.name)) {\r\n        this.options.effect.name = 'trail';\r\n        }\r\n\r\n        this.cursorIcons = [];\r\n        this.enabled = true;\r\n        this.particlesEnabled = this.options.effect.name !== \"none\";\r\n        this.hue = 0;\r\n        this.particles = [];\r\n        this.ParticleClass = Particle;\r\n\r\n        initCanvas(this);\r\n        initCursor(this);\r\n\r\n        // Load icons.json automatically\r\n        fetch('./src/data/icons.json')\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                if (Array.isArray(data.icons)) {\r\n                    this.cursorIcons = data.icons;\r\n                    this.cursorImage.src = this.cursorIcons[this.options.cursor];\r\n                    // Preload images\r\n                    this.cursorIcons.forEach(url => { const img = new Image(); img.src = url; });\r\n                } else console.error(\"icons.json does not contain 'icons' array\");\r\n            })\r\n            .catch(err => console.error(\"Failed to load icons.json:\", err));\r\n\r\n        animate(this);\r\n    }\r\n\r\n    setIcon(index) { API.setIcon(this, index); }\r\n    setEffect(effectObj) { API.setEffect(this, effectObj); }\r\n    enable() { API.enable(this); }\r\n    disable() { API.disable(this); }\r\n    enableEffect() { this.particlesEnabled = true; }\r\n    disableEffect() { this.particlesEnabled = false; }\r\n}\r\n\r\n// Global Init\r\nwindow.Cursorly = {\r\n    init: (options) => new Cursorly(options)\r\n};\r\n","export function initCanvas(lib) {\r\n    document.body.style.cursor = \"none\";\r\n    document.documentElement.style.cursor = \"none\";\r\n    document.querySelectorAll(\"a, button\").forEach(el => el.style.cursor = \"none\");\r\n\r\n    lib.canvas = document.createElement(\"canvas\");\r\n    lib.canvas.style.position = \"fixed\";\r\n    lib.canvas.style.top = \"0\";\r\n    lib.canvas.style.left = \"0\";\r\n    lib.canvas.style.width = \"100%\";\r\n    lib.canvas.style.height = \"100%\";\r\n    lib.canvas.style.pointerEvents = \"none\";\r\n    lib.canvas.style.zIndex = \"9999\";\r\n    document.body.appendChild(lib.canvas);\r\n    lib.ctx = lib.canvas.getContext(\"2d\");\r\n\r\n    lib.resize = () => {\r\n        lib.canvas.width = window.innerWidth || document.body.clientWidth;\r\n        lib.canvas.height = window.innerHeight || document.body.clientHeight;\r\n    };\r\n    lib.resize();\r\n    window.addEventListener(\"resize\", lib.resize);\r\n\r\n    lib.mouse = { x: -100, y: -100 };\r\n    window.addEventListener(\"mousemove\", e => {\r\n        lib.mouse.x = e.clientX;\r\n        lib.mouse.y = e.clientY;\r\n        if (lib.particlesEnabled && lib.options.effect.name !== \"none\") {\r\n            for (let i = 0; i < lib.options.effect.density; i++) {\r\n                lib.particles.push(new lib.ParticleClass(lib));\r\n            }\r\n        }\r\n    });\r\n}\r\n","export function setIcon(lib, index) {\r\n    if (index >= 0 && index < lib.cursorIcons.length) {\r\n        lib.options.cursor = index;\r\n        lib.cursorLoaded = false;\r\n        lib.cursorImage.onload = () => { lib.cursorLoaded = true; };\r\n        lib.cursorImage.src = lib.cursorIcons[index];\r\n    }\r\n}\r\n\r\nexport function setEffect(lib, effectObj) {\r\n    if (!effectObj) return;\r\n    if (effectObj.name && lib.effects.includes(effectObj.name)) {\r\n        lib.options.effect.name = effectObj.name;\r\n        lib.particlesEnabled = effectObj.name !== \"none\";\r\n    }\r\n    if (effectObj.color) lib.options.effect.color = effectObj.color;\r\n    if (effectObj.density) lib.options.effect.density = effectObj.density;\r\n    if (effectObj.size) lib.options.effect.size = effectObj.size;\r\n    if (effectObj.decay) lib.options.effect.decay = effectObj.decay;\r\n    if (effectObj.hueStep) lib.options.effect.hueStep = effectObj.hueStep;\r\n}\r\n\r\nexport function enable(lib) {\r\n    lib.enabled = true;\r\n    lib.particlesEnabled = lib.options.effect.name !== \"none\";\r\n    document.body.style.cursor = \"none\";\r\n    document.documentElement.style.cursor = \"none\";\r\n}\r\n\r\nexport function disable(lib) {\r\n    lib.enabled = false;\r\n    lib.particlesEnabled = false;\r\n    document.body.style.cursor = \"default\";\r\n    document.documentElement.style.cursor = \"default\";\r\n    document.querySelectorAll(\"a, button\").forEach(el => el.style.cursor = \"pointer\");\r\n}\r\n"],"names":["effectsList","effectsData","map","e","name","Particle","constructor","lib","minSize","maxSize","options","effect","size","this","x","mouse","y","Math","random","speedX","speedY","color","hue","update","decay","draw","ctx","beginPath","arc","PI","fillStyle","fill","animate","clearRect","canvas","width","height","particlesEnabled","hueStep","i","particles","length","splice","enabled","cursorLoaded","cursorSize","drawImage","cursorImage","drawCursor","requestAnimationFrame","Cursorly","Object","assign","cursor","effects","defaultEffect","find","density","getEffectDefaults","includes","cursorIcons","ParticleClass","document","body","style","documentElement","querySelectorAll","forEach","el","createElement","position","top","left","pointerEvents","zIndex","appendChild","getContext","resize","window","innerWidth","clientWidth","innerHeight","clientHeight","addEventListener","clientX","clientY","push","Image","onload","initCursor","fetch","then","res","json","data","Array","isArray","icons","src","url","console","error","catch","err","setIcon","index","API.setIcon","setEffect","effectObj","API.setEffect","enable","disable","enableEffect","disableEffect","init"],"mappings":"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"}